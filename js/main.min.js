function startOptimisticSubmission(t,s){let o=t.querySelector(".send-btn"),n=o.textContent;showOptimisticSuccess(t,o),submitToAPI(s).then(e=>{handleAPISuccess(e,o,n)}).catch(e=>{handleAPIFailure(e,t,s,o,n)})}function showOptimisticSuccess(e,t){showAlert(window.INNVEST_CONFIG.UI.FORM_SUCCESS_MESSAGE,"success"),t.textContent=window.INNVEST_CONFIG.UI.BUTTON_STATES.SUCCESS,t.disabled=!0,t.style.background="#16a34a",e.reset(),window.INNVEST_CONFIG.FEATURES.DEBUG_MODE&&console.log("Showing optimistic success state")}function submitToAPI(a){return new Promise((t,s)=>{let e=new AbortController,o=setTimeout(()=>{e.abort(),s(new Error("Request timeout"))},window.INNVEST_CONFIG.API.TIMEOUT);var n={name:a.name,email:a.email,message:a.message||"",emailUpdates:a.emailUpdates};fetch(window.INNVEST_CONFIG.API.BASE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:e.signal}).then(e=>{if(clearTimeout(o),e.ok)return e.json();throw new Error(`HTTP ${e.status}: `+e.statusText)}).then(e=>{if(!e.success)throw new Error(e.error||"Server returned error");t(e)}).catch(e=>{clearTimeout(o),s(e)})})}function handleAPISuccess(e,t,s){window.INNVEST_CONFIG.FEATURES.DEBUG_MODE&&console.log("API submission successful:",e.submissionId||"No ID returned"),setTimeout(()=>{resetSubmitButton(t,s)},2e3)}function handleAPIFailure(e,t,s,o,n){window.INNVEST_CONFIG.FEATURES.DEBUG_MODE&&console.error("API submission failed:",e.message),rollbackOptimisticState(t,s,o,n),showAlert("There was a connection issue, but don't worry - your information has been saved and we'll still contact you!","warning")}function rollbackOptimisticState(e,t,s,o){e.querySelector('input[name="name"]').value=t.name,e.querySelector('input[name="email"]').value=t.email,e.querySelector('textarea[name="message"]').value=t.message||"",e.querySelector("#emailUpdates").checked=t.emailUpdates,resetSubmitButton(s,o),window.INNVEST_CONFIG.FEATURES.DEBUG_MODE&&console.log("Rolled back optimistic state, form data restored")}function resetSubmitButton(e,t){e.textContent=t,e.disabled=!1,e.style.background=""}function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function showCookieNotice(){var e=document.getElementById("cookieNotice");!localStorage.getItem("cookieAccepted")&&e?e.style.display="block":e&&(e.style.display="none")}function acceptCookies(){var e=document.getElementById("cookieNotice");e&&(e.style.display="none",localStorage.setItem("cookieAccepted","true"))}function showAlert(e,t="info"){var s=document.querySelector(".custom-alert");s&&s.remove();let o=document.createElement("div"),n=(o.className="custom-alert alert-"+t,o.innerHTML=`
        <div class="alert-content">
            <span class="alert-message">${e}</span>
            <button class="alert-close">&times;</button>
        </div>
    `,o.style.cssText=`
        position: fixed;
        top: 30px;
        left: 50%;
        transform: translateX(-50%) translateY(-100px);
        z-index: 10000;
        background: ${"success"===t?"#16a34a":"error"===t?"#dc2626":"warning"===t?"#f59e0b":"#1A2A4A"};
        color: white;
        padding: 20px 30px;
        border-radius: 12px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        transition: transform 0.4s ease;
        max-width: 500px;
        word-wrap: break-word;
        font-family: 'Inter', sans-serif;
        font-weight: 600;
    `,o.querySelector(".alert-content").style.cssText=`
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 20px;
    `,o.querySelector(".alert-close"));n.style.cssText=`
        background: none;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
        padding: 0;
        line-height: 1;
        opacity: 0.8;
        transition: opacity 0.3s ease;
    `,n.addEventListener("mouseenter",()=>{n.style.opacity="1"}),n.addEventListener("mouseleave",()=>{n.style.opacity="0.8"}),document.body.appendChild(o),setTimeout(()=>{o.style.transform="translateX(-50%) translateY(0)"},100),n.addEventListener("click",()=>{o.style.transform="translateX(-50%) translateY(-100px)",setTimeout(()=>o.remove(),400)}),setTimeout(()=>{o.parentNode&&(o.style.transform="translateX(-50%) translateY(-100px)",setTimeout(()=>o.remove(),400))},5e3)}document.addEventListener("DOMContentLoaded",function(){showCookieNotice();let n=document.getElementById("waitlistForm");n&&n.addEventListener("submit",function(e){e.preventDefault();var e=new FormData(n),t=e.get("name"),s=e.get("email"),e=e.get("message"),o=document.getElementById("emailUpdates").checked;t&&s?isValidEmail(s)?(t={name:t,email:s,message:e,emailUpdates:o},startOptimisticSubmission(n,t)):showAlert("Please enter a valid email address.","error"):showAlert("Please fill in all required fields.","error")});let t=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".subtitle-section, .coming-soon, .waitlist-section").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.8s ease, transform 0.8s ease",t.observe(e)})});